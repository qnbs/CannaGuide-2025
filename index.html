<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="importmap">
{
  "imports": {
    "@/": "./",
    "zod": "https://aistudiocdn.com/zod@^3.23.8",
    "jspdf-autotable": "https://aistudiocdn.com/jspdf-autotable@^3.8.2",
    "jspdf": "https://aistudiocdn.com/jspdf@^2.5.1",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.19.0",
    "react-dom": "https://aistudiocdn.com/react-dom@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "i18next": "https://aistudiocdn.com/i18next@^25.5.2",
    "react-i18next": "https://aistudiocdn.com/react-i18next@^15.0.0",
    "reselect": "https://aistudiocdn.com/reselect@^5.1.1",
    "immer": "https://aistudiocdn.com/immer@^10.1.3",
    "d3": "https://aistudiocdn.com/d3@^7.9.0",
    "immer/": "https://aistudiocdn.com/immer@^10.1.3/",
    "@reduxjs/toolkit": "https://aistudiocdn.com/@reduxjs/toolkit@^2.2.6",
    "react-redux": "https://aistudiocdn.com/react-redux@^9.1.2",
    "@reduxjs/toolkit/": "https://aistudiocdn.com/@reduxjs/toolkit@^2.2.6/",
    "zustand/": "https://aistudiocdn.com/zustand@^5.0.8/",
    "d3-hierarchy": "https://aistudiocdn.com/d3-hierarchy@^3.1.2",
    "vite": "https://aistudiocdn.com/vite@^7.1.9",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.0.4",
    "@testing-library/react": "https://aistudiocdn.com/@testing-library/react@^16.3.0",
    "vitest": "https://aistudiocdn.com/vitest@^3.2.4",
    "vitest/": "https://aistudiocdn.com/vitest@^3.2.4/",
    "@testing-library/jest-dom/": "https://aistudiocdn.com/@testing-library/jest-dom@^6.9.1/"
  }
}
</script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CannaGuide 2025 - Cannabis Grow Guide with Gemini</title>
    <meta name="description" content="Cannabis Grow Guide with Gemini - Your AI-powered digital companion for the entire cannabis cultivation cycle. Track plants, explore 700+ strains, get AI equipment advice, and master your grow with an interactive guide." />

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#0A1927" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="CannaGuide 2025" />
    <link rel="icon" href="favicon.ico" sizes="any" />
    <link rel="icon" href="icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="icon.svg" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&family=IBM+Plex+Mono:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500;600;700&family=Lexend:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <style>
      /* --- THEMES --- */
      /* Midnight (Default) - Reworked Cyber-Organic Theme */
      :root, :root.dark.theme-midnight { color-scheme: dark; --color-bg-primary: 5 10 20; --color-bg-component: 15 25 40; --color-border: 226 232 240; --color-primary-50: 236 254 255; --color-primary-100: 207 250 254; --color-primary-200: 165 243 252; --color-primary-300: 103 232 249; --color-primary-400: 34 211 238; --color-primary-500: 6 182 212; --color-primary-600: 8 145 178; --color-primary-700: 14 116 144; --color-primary-800: 21 94 117; --color-primary-900: 24 81 101; --color-primary-950: 8 51 68; --color-accent-50: 250 245 255; --color-accent-100: 243 232 255; --color-accent-200: 233 213 255; --color-accent-300: 216 180 254; --color-accent-400: 192 132 252; --color-accent-500: 168 85 247; --color-accent-600: 147 51 234; --color-accent-700: 126 34 206; --color-accent-800: 107 33 168; --color-accent-900: 88 28 135; --color-accent-950: 59 7 100; --color-secondary-50: 240 253 244; --color-secondary-100: 220 252 231; --color-secondary-200: 187 247 208; --color-secondary-300: 134 239 172; --color-secondary-400: 74 222 128; --color-secondary-500: 34 197 94; --color-secondary-600: 22 163 74; --color-secondary-700: 21 128 61; --color-secondary-800: 22 101 52; --color-secondary-900: 20 83 45; --color-secondary-950: 5 46 22; --color-neutral-50: 248 250 252; --color-neutral-100: 241 245 249; --color-neutral-200: 226 232 240; --color-neutral-300: 203 213 225; --color-neutral-400: 148 163 184; --color-neutral-500: 100 116 139; --color-neutral-600: 71 85 105; --color-neutral-700: 51 65 85; --color-neutral-800: 30 41 59; --color-neutral-900: 15 23 42; --color-neutral-950: 2 6 23; --color-text-on-accent: 255 255 255; --color-success: 74 222 128; --color-warning: 251 176 60; --color-danger: 248 113 113; --color-info: 59 130 246; }

      /* Forest Theme - Refined */
      :root.dark.theme-forest { color-scheme: dark; --color-bg-primary: 18 29 27; --color-bg-component: 28 41 39; --color-border: 226 232 240; --color-primary-50: 236 253 245; --color-primary-100: 209 250 229; --color-primary-200: 167 243 208; --color-primary-300: 110 231 183; --color-primary-400: 52 211 153; --color-primary-500: 16 185 129; --color-primary-600: 5 150 105; --color-primary-700: 4 120 87; --color-primary-800: 6 95 70; --color-primary-900: 6 78 59; --color-primary-950: 4 47 35; --color-accent-50: 254 252 232; --color-accent-100: 254 249 195; --color-accent-200: 254 240 138; --color-accent-300: 253 224 71; --color-accent-400: 250 204 21; --color-accent-500: 234 179 8; --color-accent-600: 202 138 4; --color-accent-700: 161 98 7; --color-accent-800: 133 77 14; --color-accent-900: 113 63 18; --color-accent-950: 69 36 6; --color-secondary-50: 239 246 255; --color-secondary-100: 219 234 254; --color-secondary-200: 191 219 254; --color-secondary-300: 147 197 253; --color-secondary-400: 96 165 250; --color-secondary-500: 59 130 246; --color-secondary-600: 37 99 235; --color-secondary-700: 29 78 216; --color-secondary-800: 30 64 175; --color-secondary-900: 30 58 138; --color-secondary-950: 23 37 84; --color-neutral-200: 229 231 235; --color-neutral-300: 209 213 219; --color-neutral-400: 156 163 175; --color-neutral-500: 100 116 139; --color-neutral-700: 51 65 85; --color-neutral-800: 30 41 59; --color-neutral-900: 15 23 42; --color-success: 134 239 172; --color-warning: 251 191 36; --color-danger: 252 165 165; --color-info: 96 165 250; }
      
      /* Purple Haze Theme - Refined */
      :root.dark.theme-purpleHaze { color-scheme: dark; --color-bg-primary: 28 18 43; --color-bg-component: 44 28 69; --color-border: 226 232 240; --color-primary-50: 250 245 255; --color-primary-100: 243 232 255; --color-primary-200: 233 213 255; --color-primary-300: 216 180 254; --color-primary-400: 192 132 252; --color-primary-500: 168 85 247; --color-primary-600: 147 51 234; --color-primary-700: 126 34 206; --color-primary-800: 107 33 168; --color-primary-900: 88 28 135; --color-primary-950: 59 7 100; --color-accent-50: 255 240 245; --color-accent-100: 254 226 231; --color-accent-200: 252 199 212; --color-accent-300: 251 171 193; --color-accent-400: 244 114 182; --color-accent-500: 236 72 153; --color-accent-600: 219 39 119; --color-accent-700: 190 24 93; --color-accent-800: 157 23 77; --color-accent-900: 131 24 67; --color-accent-950: 86 11 38; --color-secondary-50: 236 254 255; --color-secondary-100: 207 250 254; --color-secondary-200: 165 243 252; --color-secondary-300: 103 232 249; --color-secondary-400: 34 211 238; --color-secondary-500: 6 182 212; --color-secondary-600: 8 145 178; --color-secondary-700: 14 116 144; --color-secondary-800: 21 94 117; --color-secondary-900: 24 81 101; --color-secondary-950: 8 51 68; --color-neutral-200: 233 213 255; --color-neutral-300: 216 180 254; --color-neutral-400: 192 132 252; --color-neutral-500: 126 34 206; --color-neutral-700: 88 28 135; --color-neutral-800: 59 7 100; --color-neutral-900: 44 28 69; --color-success: 74 222 128; --color-warning: 251 176 60; --color-danger: 248 113 113; --color-info: 34 211 238; }
      
      /* Desert Sky Theme - Refined */
      :root.dark.theme-desertSky { color-scheme: dark; --color-bg-primary: 17 24 39; --color-bg-component: 31 41 55; --color-border: 226 232 240; --color-primary-50: 254 249 195; --color-primary-100: 253 230 138; --color-primary-200: 252 211 77; --color-primary-300: 251 191 36; --color-primary-400: 245 158 11; --color-primary-500: 217 119 6; --color-primary-600: 180 83 9; --color-primary-700: 146 64 14; --color-primary-800: 120 53 15; --color-primary-900: 97 44 12; --color-primary-950: 59 23 2; --color-accent-50: 252 231 243; --color-accent-100: 251 207 232; --color-accent-200: 249 168 212; --color-accent-300: 244 114 182; --color-accent-400: 236 72 153; --color-accent-500: 219 39 119; --color-accent-600: 190 24 93; --color-accent-700: 157 23 77; --color-accent-800: 131 24 67; --color-accent-900: 112 30 63; --color-accent-950: 74 5 38; --color-secondary-50: 239 246 255; --color-secondary-100: 219 234 254; --color-secondary-200: 191 219 254; --color-secondary-300: 147 197 253; --color-secondary-400: 96 165 250; --color-secondary-500: 59 130 246; --color-secondary-600: 37 99 235; --color-secondary-700: 29 78 216; --color-secondary-800: 30 64 175; --color-secondary-900: 30 58 138; --color-secondary-950: 23 37 84; --color-neutral-200: 229 231 235; --color-neutral-300: 209 213 219; --color-neutral-400: 156 163 175; --color-neutral-500: 107 114 128; --color-neutral-700: 55 65 81; --color-neutral-800: 31 41 55; --color-neutral-900: 17 24 39; --color-success: 52 211 153; --color-warning: 251 146 60; --color-danger: 239 68 68; --color-info: 96 165 250; }

      /* Rose Quartz Theme - Refined */
      :root.dark.theme-roseQuartz { color-scheme: dark; --color-bg-primary: 43 18 33; --color-bg-component: 69 28 54; --color-border: 226 232 240; --color-primary-50: 255 240 245; --color-primary-100: 254 226 231; --color-primary-200: 252 199 212; --color-primary-300: 251 171 193; --color-primary-400: 244 114 182; --color-primary-500: 236 72 153; --color-primary-600: 219 39 119; --color-primary-700: 190 24 93; --color-primary-800: 157 23 77; --color-primary-900: 131 24 67; --color-primary-950: 86 11 38; --color-accent-50: 250 245 255; --color-accent-100: 243 232 255; --color-accent-200: 233 213 255; --color-accent-300: 216 180 254; --color-accent-400: 192 132 252; --color-accent-500: 168 85 247; --color-accent-600: 147 51 234; --color-accent-700: 126 34 206; --color-accent-800: 107 33 168; --color-accent-900: 88 28 135; --color-accent-950: 59 7 100; --color-secondary-50: 236 254 255; --color-secondary-100: 207 250 254; --color-secondary-200: 165 243 252; --color-secondary-300: 103 232 249; --color-secondary-400: 34 211 238; --color-secondary-500: 6 182 212; --color-secondary-600: 8 145 178; --color-secondary-700: 14 116 144; --color-secondary-800: 21 94 117; --color-secondary-900: 24 81 101; --color-secondary-950: 8 51 68; --color-neutral-200: 251 207 232; --color-neutral-300: 249 168 212; --color-neutral-400: 244 114 182; --color-neutral-500: 219 39 119; --color-neutral-700: 157 23 77; --color-neutral-800: 86 11 38; --color-neutral-900: 69 28 54; --color-success: 74 222 128; --color-warning: 251 176 60; --color-danger: 248 113 113; --color-info: 34 211 238; }

      /* Rainbow Kush Theme */
      :root.dark.theme-rainbowKush { color-scheme: dark; --color-bg-primary: 20 20 25; --color-bg-component: 30 30 38; --color-border: 226 232 240; --color-primary-50: 239 246 255; --color-primary-100: 219 234 254; --color-primary-200: 191 219 254; --color-primary-300: 147 197 253; --color-primary-400: 96 165 250; --color-primary-500: 59 130 246; --color-primary-600: 37 99 235; --color-primary-700: 29 78 216; --color-primary-800: 30 64 175; --color-primary-900: 30 58 138; --color-primary-950: 23 37 84; --color-accent-50: 250 245 255; --color-accent-100: 243 232 255; --color-accent-200: 233 213 255; --color-accent-300: 216 180 254; --color-accent-400: 192 132 252; --color-accent-500: 168 85 247; --color-accent-600: 147 51 234; --color-accent-700: 126 34 206; --color-accent-800: 107 33 168; --color-accent-900: 88 28 135; --color-accent-950: 59 7 100; --color-secondary-50: 240 253 244; --color-secondary-100: 220 252 231; --color-secondary-200: 187 247 208; --color-secondary-300: 134 239 172; --color-secondary-400: 74 222 128; --color-secondary-500: 34 197 94; --color-secondary-600: 22 163 74; --color-secondary-700: 21 128 61; --color-secondary-800: 22 101 52; --color-secondary-900: 20 83 45; --color-secondary-950: 5 46 22; --color-neutral-50: 248 250 252; --color-neutral-100: 241 245 249; --color-neutral-200: 226 232 240; --color-neutral-300: 203 213 225; --color-neutral-400: 148 163 184; --color-neutral-500: 100 116 139; --color-neutral-600: 71 85 105; --color-neutral-700: 51 65 85; --color-neutral-800: 30 41 59; --color-neutral-900: 15 23 42; --color-neutral-950: 2 6 23; --color-success: 74 222 128; --color-warning: 251 191 36; --color-danger: 248 113 113; --color-info: 59 130 246; }


      /* --- FONT FAMILIES --- */
      html { font-family: 'Inter', sans-serif; }
      .font-display { font-family: 'Lexend', sans-serif; }
      .font-mono { font-family: 'IBM Plex Mono', monospace; }
      .font-dyslexia { font-family: 'Atkinson Hyperlegible', sans-serif; }


      /* --- TAILWIND THEME CONFIG --- */
      tailwind.config = {
          theme: {
              extend: {
                  colors: {
                      'bg-primary': 'rgb(var(--color-bg-primary))',
                      'bg-component': 'rgb(var(--color-bg-component))',
                      'border': 'rgba(var(--color-border), 0.1)',
                      'text-on-accent': 'rgb(var(--color-text-on-accent))',
                      'success': 'rgb(var(--color-success))',
                      'warning': 'rgb(var(--color-warning))',
                      'danger': 'rgb(var(--color-danger))',
                      'info': 'rgb(var(--color-info))',
                      'primary': { 50: 'rgb(var(--color-primary-50))', 100: 'rgb(var(--color-primary-100))', 200: 'rgb(var(--color-primary-200))', 300: 'rgb(var(--color-primary-300))', 400: 'rgb(var(--color-primary-400))', 500: 'rgb(var(--color-primary-500))', 600: 'rgb(var(--color-primary-600))', 700: 'rgb(var(--color-primary-700))', 800: 'rgb(var(--color-primary-800))', 900: 'rgb(var(--color-primary-900))', 950: 'rgb(var(--color-primary-950))', },
                      'accent': { 50: 'rgb(var(--color-accent-50))', 100: 'rgb(var(--color-accent-100))', 200: 'rgb(var(--color-accent-200))', 300: 'rgb(var(--color-accent-300))', 400: 'rgb(var(--color-accent-400))', 500: 'rgb(var(--color-accent-500))', 600: 'rgb(var(--color-accent-600))', 700: 'rgb(var(--color-accent-700))', 800: 'rgb(var(--color-accent-800))', 900: 'rgb(var(--color-accent-900))', 950: 'rgb(var(--color-accent-950))', },
                      'secondary': { 50: 'rgb(var(--color-secondary-50))', 100: 'rgb(var(--color-secondary-100))', 200: 'rgb(var(--color-secondary-200))', 300: 'rgb(var(--color-secondary-300))', 400: 'rgb(var(--color-secondary-400))', 500: 'rgb(var(--color-secondary-500))', 600: 'rgb(var(--color-secondary-600))', 700: 'rgb(var(--color-secondary-700))', 800: 'rgb(var(--color-secondary-800))', 900: 'rgb(var(--color-secondary-900))', 950: 'rgb(var(--color-secondary-950))', },
                      'slate': { 50: 'rgb(var(--color-neutral-50))', 100: 'rgb(var(--color-neutral-100))', 200: 'rgb(var(--color-neutral-200))', 300: 'rgb(var(--color-neutral-300))', 400: 'rgb(var(--color-neutral-400))', 500: 'rgb(var(--color-neutral-500))', 600: 'rgb(var(--color-neutral-600))', 700: 'rgb(var(--color-neutral-700))', 800: 'rgb(var(--color-neutral-800))', 900: 'rgb(var(--color-neutral-900))', 950: 'rgb(var(--color-neutral-950))', },
                  },
                  keyframes: {
                      'slide-in-up': {
                          '0%': { transform: 'translateY(100%)', opacity: '0' },
                          '100%': { transform: 'translateY(0)', opacity: '1' },
                      },
                       'fade-in-up': {
                          '0%': { transform: 'translateY(10px)', opacity: '0' },
                          '100%': { transform: 'translateY(0)', opacity: '1' },
                      },
                      'fade-in': {
                          '0%': { opacity: '0' },
                          '100%': { opacity: '1' },
                      },
                      'slide-down-fade-in': {
                          '0%': { opacity: 0, transform: 'translateY(-10px)' },
                          '100%': { opacity: 1, transform: 'translateY(0)' },
                      },
                      'pulse-glow': {
                          '0%, 100%': { boxShadow: '0 0 0px rgb(var(--color-primary-400) / 0.7)' },
                          '50%': { boxShadow: '0 0 10px 2px rgb(var(--color-primary-400) / 0.7)' },
                      }
                  },
                  animation: {
                      'slide-in-up': 'slide-in-up 0.3s ease-out',
                      'fade-in': 'fade-in 0.3s ease-out',
                      'fade-in-up': 'fade-in-up 0.4s ease-out',
                      'slide-down-fade-in': 'slide-down-fade-in 0.2s ease-out',
                      'pulse-glow': 'pulse-glow 2s infinite ease-in-out',
                  },
                  boxShadow: {
                      'glow-primary': '0 0 8px rgb(var(--color-primary-400) / 0.6)',
                      'inner-glow': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.1)',
                  }
              }
          }
      }

      /* --- GLOBAL STYLES & CUSTOM COMPONENTS --- */
      body {
          -webkit-tap-highlight-color: transparent;
      }
      
      /* Reinstated Optimal Scrollbar Design - Applied Globally */
      * {
        scrollbar-width: thin;
        scrollbar-color: rgb(var(--color-primary-700)) transparent;
      }
      ::-webkit-scrollbar {
        width: 8px; /* The clickable area */
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background-color: rgb(var(--color-primary-700));
        border-radius: 4px;
        /* Create padding around the thumb, making it look thinner */
        border: 2px solid transparent;
        background-clip: content-box;
      }
       ::-webkit-scrollbar-thumb:hover {
        background-color: rgb(var(--color-primary-600));
      }

      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      .glass-pane { background-color: rgba(var(--color-bg-component), 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); }
      .card-interactive:hover { background-color: rgba(var(--color-bg-component), 1); border-color: rgba(var(--color-primary-500), 0.3); }

      .card-interactive-glow { position: relative; overflow: hidden; }
      .card-interactive-glow:hover::before { content: ''; position: absolute; left: var(--x); top: var(--y); transform: translate(-50%, -50%); width: 200px; height: 200px; background: radial-gradient(circle, rgb(var(--color-primary-500)/0.15) 0%, transparent 70%); pointer-events: none; }

      .text-glow { text-shadow: 0 0 8px rgb(var(--color-primary-400) / 0.8); }

      .custom-checkbox { appearance: none; -webkit-appearance: none; background-color: rgb(var(--color-neutral-800)); border: 1px solid rgb(var(--color-neutral-600)); border-radius: 0.25rem; width: 1.25rem; height: 1.25rem; cursor: pointer; transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1); display: inline-flex; align-items: center; justify-content: center; }
      .custom-checkbox:checked { background-color: rgb(var(--color-primary-500)); border-color: rgb(var(--color-primary-400)); }
      .custom-checkbox::after { content: "âœ”"; font-size: 0.8rem; color: white; opacity: 0; transform: scale(0); transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1); }
      .custom-checkbox:checked::after { opacity: 1; transform: scale(1); }

      .favorite-btn-glow.is-favorite { color: rgb(var(--color-primary-400)); animation: pulse-glow 2s infinite ease-in-out; }

      /* Toast Animations */
      .toast { transition: transform 300ms ease, opacity 300ms ease; }
      .toast-entering { opacity: 0; transform: translateY(20px) scale(0.95); }
      .toast-entered { opacity: 1; transform: translateY(0) scale(1); }
      .toast-exiting { opacity: 0; transform: translateY(10px) scale(0.95); }

      #toast-container { position: fixed; bottom: calc(env(safe-area-inset-bottom, 0) + 70px); sm:bottom-4; left: 50%; transform: translateX(-50%); z-index: 200; display: flex; flex-direction: column; gap: 0.5rem; width: 100%; max-width: 24rem; padding: 0 1rem; }

      /* Genealogy Tree Styles */
      .genealogy-link { fill: none; stroke: rgb(var(--color-neutral-700)); stroke-width: 1.5px; }
      .genealogy-node-container { padding: 0.5rem; background-color: rgb(var(--color-neutral-800)/0.9); border: 1px solid rgb(var(--color-neutral-700)); border-radius: 0.5rem; width: 220px; height: 80px; display: flex; flex-direction: column; justify-content: space-between; position: relative; transition: all 0.2s; cursor: pointer; }
      .genealogy-node-container:not(.placeholder):hover { border-color: rgb(var(--color-primary-500)); background-color: rgb(var(--color-neutral-700)); transform: scale(1.05); }
      .genealogy-node-container.placeholder { border-style: dashed; }
      .genealogy-node-thc-bar { width: 100%; height: 4px; background-color: rgb(var(--color-neutral-700)); border-radius: 2px; margin-top: 4px; overflow: hidden; }
      .genealogy-node-thc-fill { height: 100%; background-color: rgb(var(--color-primary-500)); border-radius: 2px; box-shadow: 0 0 4px rgb(var(--color-primary-500)); }
      .genealogy-node-expand-btn { position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 20px; height: 20px; border-radius: 9999px; background-color: rgb(var(--color-bg-component)); border: 1px solid rgb(var(--color-neutral-700)); color: rgb(var(--color-neutral-300)); display: flex; align-items: center; justify-content: center; cursor: pointer; }
      .genealogy-node-expand-btn:hover { background-color: rgb(var(--color-primary-500)); color: white; }

      .history-chart-grid .domain { display: none; }
      .history-chart-grid line { stroke: rgba(var(--color-border), 0.1); }
      .history-chart-labels { font-size: 8px; fill: rgb(var(--color-neutral-400)); }
      .tts-disabled .speakable-button { display: none; }
      .speakable-highlight { background-color: rgb(var(--color-primary-500)/0.1); }
      
      /* New UI Density styles */
      .ui-density-compact main { padding: 0.5rem !important; padding-bottom: 5rem !important; }
      .ui-density-compact .glass-pane, .ui-density-compact details { padding: 0.75rem !important; }
      .ui-density-compact .strain-list-item-padding { padding: 0.5rem 0.75rem !important; }

      /* --- ACCESSIBILITY --- */
      .font-dyslexia body { font-family: 'Atkinson Hyperlegible', sans-serif !important; }
      .font-dyslexia .font-display, .font-dyslexia .font-mono { font-family: 'Atkinson Hyperlegible', sans-serif !important; }
      
      @media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; } }
      .reduced-motion *, .reduced-motion *::before, .reduced-motion *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
      
      .colorblind-protanopia body { filter: url(#protanopia); }
      .colorblind-deuteranopia body { filter: url(#deuteranopia); }
      .colorblind-tritanopia body { filter: url(#tritanopia); }
    </style>
  </head>
  <body class="bg-bg-primary">
    <svg width="0" height="0" style="position: absolute;">
      <defs>
        <filter id="protanopia">
          <feColorMatrix type="matrix" values="0.567, 0.433, 0,     0, 0,
                                                0.558, 0.442, 0,     0, 0,
                                                0,     0.242, 0.758, 0, 0,
                                                0,     0,     0,     1, 0"/>
        </filter>
        <filter id="deuteranopia">
          <feColorMatrix type="matrix" values="0.625, 0.375, 0,   0, 0,
                                                0.7,   0.3,   0,   0, 0,
                                                0,     0.3,   0.7, 0, 0,
                                                0,     0,     0,   1, 0"/>
        </filter>
        <filter id="tritanopia">
          <feColorMatrix type="matrix" values="0.95, 0.05,  0,     0, 0,
                                                0,    0.433, 0.567, 0, 0,
                                                0,    0.475, 0.525, 0, 0,
                                                0,    0,     0,     1, 0"/>
        </filter>
      </defs>
    </svg>
    <div id="root">
      <div style="display: flex; flex-direction: column; height: 100vh; align-items: center; justify-content: center; color: #94a3b8; font-family: Inter, sans-serif;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width: 6rem; height: 6rem; color: #34d399; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;">
          <defs><linearGradient id="cannaGuideLeafGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="rgb(74, 222, 128)"></stop><stop offset="100%" stop-color="rgb(16, 185, 129)"></stop></linearGradient></defs>
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path>
          <g transform="translate(5.2, 5.2) scale(0.6)"><path fill="url(#cannaGuideLeafGradient)" stroke="none" d="M20.21,12.79a.78.78,0,0,0,0-1.11,5.27,5.27,0,0,1-3.79-3.79.78.78,0,0,0-1.11,0L12,11.16,8.69,7.89a.78.78,0,0,0-1.11,0A5.27,5.27,0,0,1,3.79,11.68a.78.78,0,0,0,0,1.11L7.06,16a.79.79,0,0,0,1.11,0,3.15,3.15,0,0,0,4.46,0,.79.79,0,0,0,1.11,0Z"></path><path fill="url(#cannaGuideLeafGradient)" stroke="none" d="M16.94,16a.79.79,0,0,0,1.11,0L21.42,12a.79.79,0,0,0,0-1.12.78.78,0,0,0-1.11,0L18.05,13.2A5.28,5.28,0,0,1,16.94,16Z"></path><path fill="url(#cannaGuideLeafGradient)" stroke="none" d="M12,21.9a.79.79,0,0,0,.55-.22l3.27-3.27a.78.78,0,0,0-1.11-1.11L12,20,9.29,17.31a.78.78,0,0,0-1.11,1.11L11.45,21.68A.79.79,0,0,0,12,21.9Z"></path><path fill="url(#cannaGuideLeafGradient)" stroke="none" d="M2.58,12a.79.79,0,0,0,0-1.12.78.78,0,0,0-1.11,0L.1,12.21a.78.78,0,0,0,0,1.11.77.77,0,0,0,.55.22.79.79,0,0,0,.56-.22l1.37-1.37A5.28,5.28,0,0,1,2.58,12Z"></path></g>
        </svg>
        <p style="margin-top: 1rem; font-size: 1.125rem; font-weight: 600;">Preparing your guide...</p>
      </div>
    </div>
    <div id="toast-container"></div>
    <noscript>
      <div style="position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background-color: #0F172A; color: #cbd5e1; text-align: center; padding: 2rem;">
        <h1 style="font-size: 1.5rem; font-weight: bold; color: white;">JavaScript Required</h1>
        <p>This application requires JavaScript to function. Please enable it in your browser settings and refresh the page.</p>
      </div>
    </noscript>
    <script type="module" src="/index.js"></script>
  </body>
</html>